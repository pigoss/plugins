{"version":3,"sources":["../src/status_ctrl.js"],"names":["_","MetricsPanelCtrl","panelDefaults","bgColor","StatusCtrl","$scope","$injector","defaultsDeep","panel","events","on","onDataReceived","bind","onDataError","onInitEditMode","render","data","datajson","dataList","scope","elem","attrs","ctrl","templateUrl"],"mappings":"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","file":"status_ctrl.js","sourcesContent":["import _ from 'lodash';\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport './css/status-panel.css!';\r\n\r\nconst panelDefaults = {\r\n  // IS_POINT: true,\r\n  // url: '',\r\n  // request: '',\r\n  // updateInterval: 10000,\r\n  bgColor: [\r\n    'linear-gradient(to bottom right, #3abac7, #a375b6)',\r\n    'linear-gradient(to bottom right, #fcd98d, #f3b65b)',\r\n    'linear-gradient(to bottom right, #ffb88c, #e5658f)'\r\n  // ],\r\n  // statusColor: [\r\n  //   \"linear-gradient(to bottom right, #4acda5, #3f74c6)\",\r\n  //   \"linear-gradient(to bottom right, #3abac7, #a375b6)\",\r\n  //   \"linear-gradient(to bottom right, #ffb88c, #e5658f)\"\r\n  ],\r\n};\r\n\r\nexport class StatusCtrl extends MetricsPanelCtrl {\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    _.defaultsDeep(this.panel, panelDefaults);\r\n\r\n    this.events.on('data-received', this.onDataReceived.bind(this));\r\n    this.events.on('data-error', this.onDataError.bind(this));\r\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n    // this.update();\r\n  }\r\n\r\n  onDataError() {\r\n    this.render();\r\n  }\r\n\r\n  onDataReceived(data) {\r\n    var datajson = [{ 'name': '兖矿电邮', 'status': '1' }, { 'name': '人力资源', 'status': '2' }, { 'name': '兖矿OA', 'status': '0' }, { 'name': '全面预算系统', 'status': '0' }, { 'name': '内部市场化系统', 'status': '0' }, { 'name': '呼叫中心', 'status': '0' }, { 'name': '地测部GIS', 'status': '0' }, { 'name': '基建PMIS', 'status': '0' }, { 'name': '安监局安全信息联网', 'status': '0' }, { 'name': '实时数据联网', 'status': '1' }, { 'name': '审计系统', 'status': '2' }, { 'name': '总院PACS', 'status': '1' }, { 'name': '煤业资金', 'status': '0' }, { 'name': '煤化工能源管控', 'status': '0' }, { 'name': '物资商城', 'status': '0' }, { 'name': '环保节能系统', 'status': '1' }, { 'name': '短信平台', 'status': '2' }, { 'name': '矿井微震联网系统', 'status': '0' }, { 'name': '纪委网上举报', 'status': '1' }, { 'name': '综合调度管理信息系统', 'status': '0' }, { 'name': '综合运营', 'status': '0' }, { 'name': '考勤', 'status': '0' }, { 'name': '矿井微震联网系统', 'status': '0' }, { 'name': '计划生育', 'status': '0' }, { 'name': '集团风险管理', 'status': '0' }];\r\n\r\n    if (data[0]) {\r\n      if (data[0].dataList) {\r\n        this.dataList = data[0].dataList;\r\n      } else {\r\n        this.dataList = datajson\r\n      }\r\n    } else {\r\n      this.dataList = datajson\r\n    }\r\n    // this.transform(this.dataList);\r\n    this.render();\r\n  }\r\n\r\n  // transform(dataList) {\r\n  //   const that = this;\r\n  //   dataList.map(item => {\r\n  //     item.bgColor = that.panel.bgColor[item.status % 3];\r\n  //     // item.statusColor = that.panel.statusColor[item.status%3];\r\n  //   });\r\n  // }\r\n\r\n  // post请求\r\n  // update() {\r\n  //   let that = this, xmlhttp;\r\n\r\n  //   if (window.XMLHttpRequest) {\r\n  //     xmlhttp = new XMLHttpRequest();\r\n  //   } else {\r\n  //     xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n  //   }\r\n\r\n  //   xmlhttp.onreadystatuschange = function () {\r\n  //     if (xmlhttp.readyStatus == 4 && xmlhttp.status == 200) {\r\n  //       that.dataList = JSON.parse(xmlhttp.responseText).dataList;\r\n  //       that.render();\r\n  //     } \r\n  //   }\r\n\r\n  //   if (that.panel.url && that.panel.request) {\r\n  //     xmlhttp.open(\"POST\", that.panel.url, true);\r\n  //     xmlhttp.send(that.panel.request);\r\n  //   }\r\n\r\n  //   this.$timeout(() => { this.update(); }, that.panel.updateInterval);\r\n  // }\r\n\r\n  onInitEditMode() {\r\n    // this.addEditorTab('Options', 'public/plugins/grafana-status-panel/editor.html', 2);\r\n  }\r\n\r\n  link(scope, elem, attrs, ctrl) {\r\n    this.events.on('render', () => {\r\n      // const $panelContainer = elem.find('.list-container');\r\n    });\r\n  }\r\n}\r\n\r\nStatusCtrl.templateUrl = 'module.html';\r\n"]}